<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Metode Pembayaran - Sisambera</title>
    <link rel="stylesheet" href="../css/style.css">
</head>
<body>
    <header>
        <a href="../index.html" class="logo">SISAMBERA</a>
        <nav>
            <a href="../index.html">Menu</a>
            <a href="https://share.google/Z9udVdDifWWRAh0lY">Lokasi</a>
            <a href="">Tentang Kami</a>
        </nav>
        <button class="order-btn">Pesan Online</button>
    </header>

    <div class="breadcrumb">
        <a href="pilih-layanan.html" style="color: #999;">1. Pilih Layanan</a> > 
        <a href="isi-data-diri.html" style="color: #999;">2. Isi Data Diri</a> > 
        <a href="pilih-menu.html" style="color: #999;">3. Pilih Menu</a> > 
        <span style="color: #c1395d; font-weight: 500;">4. Metode Pembayaran</span>
    </div>

    <div class="container">
        <div class="content-wrapper">
            <div class="payment-content">
                <h2>Metode Pembayaran</h2>
                
                <div class="bank-selection">
                    <div class="bank-option" onclick="selectBank(this, 'bca')">
                        <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 120 40'%3E%3Crect fill='%230066b2' width='120' height='40'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' fill='white' font-family='Arial' font-size='16' font-weight='bold'%3EBCA%3C/text%3E%3C/svg%3E" alt="BCA" class="bank-logo">
                        <div class="payment-info">
                            <h3>BCA</h3>
                        </div>
                    </div>

                    <div class="bank-option" onclick="selectBank(this, 'bni')">
                        <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 120 40'%3E%3Crect fill='%23ff6600' width='120' height='40'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' fill='white' font-family='Arial' font-size='16' font-weight='bold'%3EBNI%3C/text%3E%3C/svg%3E" alt="BNI" class="bank-logo">
                        <div class="payment-info">
                            <h3>BNI</h3>
                        </div>
                    </div>

                    <div class="bank-option" onclick="selectBank(this, 'danamon')">
                        <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 120 40'%3E%3Crect fill='%230066b2' width='120' height='40'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' fill='white' font-family='Arial' font-size='12' font-weight='bold'%3EDanamon%3C/text%3E%3C/svg%3E" alt="Danamon" class="bank-logo">
                        <div class="payment-info">
                            <h3>Danamon</h3>
                        </div>
                    </div>

                    <div class="bank-option" onclick="selectBank(this, 'alfamart')">
                        <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 120 40'%3E%3Crect fill='%23ed1c24' width='120' height='40'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' fill='white' font-family='Arial' font-size='12' font-weight='bold'%3EAlfamart%3C/text%3E%3C/svg%3E" alt="Alfamart" class="bank-logo">
                        <div class="payment-info">
                            <h3>Alfamart</h3>
                        </div>
                    </div>
                </div>

                <button class="btn btn-success" onclick="confirmBank()">Lanjutkan</button>
            </div>

            <div class="order-summary-side">
                <div class="summary-card">
                    <h3>Ringkasan Pesanan</h3>
                    <div id="cartSummary">
                        <p style="text-align: center; color: #999; font-size: 13px;">Loading...</p>
                    </div>
                    <hr style="margin: 15px 0; border: none; border-top: 1px solid #e8e8e8;">
                    <div class="summary-subtotal">
                        <span>Subtotal</span>
                        <span id="subtotal">Rp 0</span>
                    </div>
                    <div class="summary-fee">
                        <span>Pajak (10%)</span>
                        <span id="tax">Rp 0</span>
                    </div>
                    <div class="summary-total">
                        <strong>Total</strong>
                        <strong id="total">Rp 0</strong>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h4>Rumah Makan Tradisional</h4>
                <p>Hmmm rasakan Uisa rumahan dengan cita rasa tak terlupakan</p>
            </div>
            <div class="footer-section">
                <h4>CONTACT ME</h4>
                <p>+62 895 002 84858</p>
                <p>Jl. Pradah Indah No.121</p>
            </div>
            <div class="footer-section">
                <h4>Quick Links</h4>
                <p><a href="../index.html">Menu</a></p>
                <p><a href="pilih-layanan.html">Order</a></p>
                <p><a href="#">Contact Us</a></p>
            </div>
            <div class="footer-section">
                <h4>Our Social Media</h4>
                <div class="social-links">
                    <a href="#">f</a>
                    <a href="#">ðŸ“·</a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        let selectedBank = null;

        function selectBank(element, bank) {
            document.querySelectorAll('.bank-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            element.classList.add('selected');
            selectedBank = bank;
        }

        function confirmBank() {
            if (!selectedBank) {
                alert('Pilih bank terlebih dahulu!');
                return;
            }
            sessionStorage.setItem('selectedBank', selectedBank);
            sessionStorage.setItem('paymentMethod', 'transfer');
            window.location.href = 'konfirmasi.html';
        }

        function updateCartSummary() {
            let cart = JSON.parse(sessionStorage.getItem('cart')) || [];
            const cartSummary = document.getElementById('cartSummary');

            if (cart.length === 0) {
                window.location.href = 'pilih-menu.html';
                return;
            }

            let html = '';
            let subtotal = 0;
            const grouped = {};

            cart.forEach(item => {
                if (!grouped[item.name]) {
                    grouped[item.name] = { price: item.price, qty: 0 };
                }
                grouped[item.name].qty++;
                subtotal += item.price;
            });

            Object.entries(grouped).forEach(([name, data]) => {
                html += `<div class="cart-item">
                    <div class="cart-item-info">
                        <span>${name}</span>
                        <span class="cart-qty">${data.qty}x</span>
                    </div>
                    <span>Rp ${(data.price * data.qty).toLocaleString('id-ID')}</span>
                </div>`;
            });

            const tax = Math.round(subtotal * 0.1);
            const total = subtotal + tax;

            cartSummary.innerHTML = html;
            document.getElementById('subtotal').textContent = 'Rp ' + subtotal.toLocaleString('id-ID');
            document.getElementById('tax').textContent = 'Rp ' + tax.toLocaleString('id-ID');
            document.getElementById('total').textContent = 'Rp ' + total.toLocaleString('id-ID');
        }

        updateCartSummary();
    </script>
</body>
</html>

